{% extends "base.html" %}
{% block title %}Settings Dashboard{% endblock %}

{% block content %}
<div class="card">
    <h2>Admin Settings Dashboard</h2>
    <ul style="list-style:none; padding-left: 0;">
        <li style="margin-bottom: 10px;"><a href="{% url 'user_list' %}" class="btn">Manage Users</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'source_list' %}" class="btn">Manage Source of Joining</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'payment_account_list' %}" class="btn">Manage Payment Accounts</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'import_data' %}" class="btn">Import Data</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'import_student_courses' %}" class="btn">Import Student Courses</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'export_student_courses' %}" class="btn">Export Student Courses</a></li>
        <li style="margin-bottom: 10px;"><a href="{% url 'export_data' %}" class="btn">Export Data</a></li>
        {% if request.user.role == 'admin' %}
        <li style="margin-bottom: 10px;"><a href="{% url 'transaction_log' %}" class="btn">View Transaction Logs</a></li>
        {% endif %}
        {% if request.user.is_superuser %}
        <li style="margin-bottom: 10px;">
            <form id="delete-all-courses-form" action="{% url 'delete_all_courses' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="button" class="btn btn-danger" onclick="confirmCourseDeletion()">Delete All Courses</button>
            </form>
        </li>
        <li style="margin-bottom: 10px;">
            <form id="delete-all-course-categories-form" action="{% url 'delete_all_course_categories' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="button" class="btn btn-danger" onclick="confirmCourseCategoryDeletion()">Delete All Course Categories</button>
            </form>
        </li>
        {% endif %}
    </ul>
    <a href="{% url 'admin:index' %}" class="btn btn-secondary">Go to Django Admin</a>
</div>

<script>
function confirmDeletion() {
    if (confirm("Are you sure you want to delete all students? This action cannot be undone.")) {
        document.getElementById('delete-all-students-form').submit();
    }
}

function confirmTrainerDeletion() {
    if (confirm("Are you sure you want to delete all trainers? This action cannot be undone.")) {
        document.getElementById('delete-all-trainers-form').submit();
    }
}

function confirmConsultantDeletion() {
    if (confirm("Are you sure you want to delete all consultants? This action cannot be undone.")) {
        document.getElementById('delete-all-consultants-form').submit();
    }
}

function confirmCourseDeletion() {
    if (confirm("Are you sure you want to delete all courses? This action cannot be undone.")) {
        document.getElementById('delete-all-courses-form').submit();
    }
}

function confirmCourseCategoryDeletion() {
    if (confirm("Are you sure you want to delete all course categories? This action cannot be undone.")) {
        document.getElementById('delete-all-course-categories-form').submit();
    }
}
</script>
{% endblock %}
